<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CodeCrafted</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <link rel="stylesheet" href="./assets/css/style.css" />
  </head>
  <body>
    <div include-html="modal/authHeader.html"></div>

    <!-- Slideshow -->
    <div class="slideshow" id="slide">
      <!-- test video ƒë·∫ßu h·∫π h·∫π h·∫π -->
      <video
        src="./assets/image/slide-show-1.mp4"
        class="slideshow__slide active"
        muted
        autoplay
        playsinline
        loop
      ></video>
      <img src="./assets/image/slide-show-code.avif" class="slideshow__slide" />
      <img src="./assets/image/slide-show-3.webp" class="slideshow__slide" />

      <!-- N√∫t ƒëi·ªÅu h∆∞·ªõng slideshow -->
      <a class="slideshow__control slideshow__control--prev">
        <i class="fas fa-chevron-left"></i>
      </a>
      <a class="slideshow__control slideshow__control--next">
        <i class="fas fa-chevron-right"></i>
      </a>

      <!-- C√°c n√∫t tr√≤n chuy·ªÉn slide -->
      <div class="slideshow__dots">
        <span class="slideshow__dot active"></span>
        <span class="slideshow__dot"></span>
        <span class="slideshow__dot"></span>
      </div>
    </div>

    <main>
      <!-- N√∫t quay l√™n ƒë·∫ßu trang -->
      <div
        id="backToTop"
        class="back-to-top"
        role="button"
        aria-label="Quay l√™n ƒë·∫ßu trang"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          height="32"
          fill="white"
          viewBox="0 0 24 24"
        >
          <path d="M12 4l-8 8h6v8h4v-8h6z" />
        </svg>
      </div>

      <!-- Gi·ªõi thi·ªáu  -->
      <section id="home" class="intro">
        <div class="intro__content">
          <h2 class="section__title">Ch√†o m·ª´ng ƒë·∫øn v·ªõi CodeCraft</h2>
          <p class="about__desc section__desc">
            <strong>
              N∆°i b·∫°n c√≥ th·ªÉ h·ªçc m·ªçi l√∫c, m·ªçi n∆°i v√† chinh ph·ª•c tri th·ª©c theo
              c√°ch c·ªßa ri√™ng m√¨nh!
            </strong>
          </p>

          <a href="#courses" class="btn">Kh√°m ph√° kho√° h·ªçc</a>
        </div>
      </section>

      <!-- Danh s√°ch kh√≥a h·ªçc -->
      <section id="courses" class="courses section--fade-in">
        <h3 class="section__title">Kho√° h·ªçc ph·ªï bi·∫øn</h3>
        <p class="about__desc">
          <strong>
            H·ªçc ƒë√∫ng, h·ªçc ch·∫•t ‚Äì B·∫Øt ƒë·∫ßu h√†nh tr√¨nh chinh ph·ª•c t∆∞∆°ng lai!
          </strong>
        </p>
        <div class="courses__list">
          <!-- Item 1 -->
          <div class="course" data-course="web">
            <h4 class="course__title">L·∫≠p tr√¨nh Web</h4>
            <p class="course__desc">
              üöÄ T·ª´ ki·∫øn th·ª©c n·ªÅn t·∫£ng ƒë·∫øn x√¢y d·ª±ng website chuy√™n nghi·ªáp v·ªõi
              HTML, CSS, JavaScript. T·∫°o ra nh·ªØng giao di·ªán responsive, t·ªëi ∆∞u
              tr·∫£i nghi·ªám ng∆∞·ªùi d√πng, s·∫µn s√†ng cho d·ª± √°n th·ª±c t·∫ø.
            </p>
          </div>

          <!-- Item 2 -->
          <div class="course" data-course="data">
            <h4 class="course__title">Ph√¢n t√≠ch d·ªØ li·ªáu</h4>
            <p class="course__desc">
              üìä N·∫Øm v·ªØng c√¥ng c·ª• nh∆∞ Python, Excel, Pandas, Power BI ƒë·ªÉ thu
              th·∫≠p, x·ª≠ l√Ω v√† tr·ª±c quan h√≥a d·ªØ li·ªáu. Bi·∫øn con s·ªë th√†nh chi·∫øn
              l∆∞·ª£c, t·ª´ d·ªØ li·ªáu th√†nh gi√° tr·ªã th·ª±c ti·ªÖn.
            </p>
          </div>
          <div class="course" data-course="uiux">
            <h4 class="course__title">Thi·∫øt k·∫ø UI/UX</h4>
            <p class="course__desc">
              üé® H·ªçc c√°ch thi·∫øt k·∫ø giao di·ªán thu h√∫t, d·ªÖ d√πng v√† th√¢n thi·ªán. K·∫øt
              h·ª£p t∆∞ duy tr·∫£i nghi·ªám ng∆∞·ªùi d√πng v·ªõi c√¥ng c·ª• m·∫°nh m·∫Ω nh∆∞ Figma,
              Adobe XD, ƒë∆∞a √Ω t∆∞·ªüng th√†nh s·∫£n ph·∫©m s·ªë ho√†n ch·ªânh.
            </p>
          </div>
        </div>

        <div id="courseIntro" style="display: none">
          <div id="courseIntroContent"></div>
          <button id="closeCourseIntro">ƒê√≥ng</button>
        </div>
      </section>

      <!-- V·ªÅ ch√∫ng t√¥i -->
      <section id="about-us" class="about section--fade-in">
        <h3 class="section__title">V·ªÅ ch√∫ng t√¥i</h3>
        <p class="about__desc">
          <strong>
            Ch√∫ng t√¥i cung c·∫•p n·ªÅn t·∫£ng h·ªçc t·∫≠p tr·ª±c tuy·∫øn hi·ªán ƒë·∫°i, gi√∫p b·∫°n d·ªÖ
            d√†ng ti·∫øp c·∫≠n ki·∫øn th·ª©c ch·∫•t l∆∞·ª£ng t·ª´ b·∫•t c·ª© ƒë√¢u.
          </strong>
        </p>
      </section>

      <!-- Li√™n h·ªá -->
      <section id="contact-form" class="contact section--fade-in">
        <h3 class="section__title">Li√™n h·ªá</h3>
        <form class="contact__form">
          <input
            type="text"
            placeholder="T√™n c·ªßa b·∫°n"
            required
            class="form__input"
          />
          <input
            type="email"
            placeholder="Email c·ªßa b·∫°n"
            required
            class="form__input"
          />
          <textarea
            placeholder="Tin nh·∫Øn c·ªßa b·∫°n"
            rows="5"
            class="form__textarea"
          ></textarea>
          <button type="submit" class="btn btn--submit">G·ª≠i</button>
        </form>
      </section>
    </main>

    <div id="authContainer" include-html="./modal/authModal.html"></div>

    <!-- Modal Popup kho√° h·ªçc -->
    <div
      class="modal-overlay"
      id="modalOverlay"
      role="dialog"
      aria-modal="true"
      aria-labelledby="modal-title"
      aria-hidden="true"
      style="display: none"
    >
      <div class="modal modal--course-detail" role="document">
        <button class="modal__close-btn" id="modal-close-btn" aria-label="ƒê√≥ng">
          &times;
        </button>
        <h4 class="modal__title" id="modal-title">Ti√™u ƒë·ªÅ kho√° h·ªçc</h4>
        <p class="modal__body" id="modal-content">
          N·ªôi dung chi ti·∫øt kho√° h·ªçc s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y.
        </p>
      </div>
    </div>

    <script type="module" src="./assets/script/main.js" defer></script>
    <div id="authContainer"></div>
  </body>
</html>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    fetch("auth/check-session.php")
      .then((res) => res.json())
      .then((data) => {
        console.log("D·ªØ li·ªáu session nh·∫≠n ƒë∆∞·ª£c:", data);

        const authBtn = document.getElementById("authBtn");
        const authContainer = document.getElementById("authContainer");

        if (data.loggedIn) {
          console.log("ƒê√£ ƒëƒÉng nh·∫≠p, ƒëang hi·ªÉn th·ªã Hi username");

          // ·∫®n n√∫t ƒëƒÉng nh·∫≠p n·∫øu c√≥
          if (authBtn) authBtn.style.display = "none";

          // T·∫°o d√≤ng ch·ªØ Hi username
          const welcomeText = document.createElement("span");
          welcomeText.textContent = `Hi, ${data.username}`;
          welcomeText.style.color = "white";
          welcomeText.style.marginLeft = "1rem";
          welcomeText.style.fontWeight = "bold";
          authContainer.appendChild(welcomeText);

          // T·∫°o n√∫t logout
          const logoutBtn = document.createElement("button");
          logoutBtn.textContent = "Logout";
          logoutBtn.style.marginLeft = "1rem";
          logoutBtn.onclick = () => {
            fetch("auth/logout.php").then(() => {
              window.location.reload(); // ho·∫∑c chuy·ªÉn trang v·ªÅ login
            });
          };
          authContainer.appendChild(logoutBtn);
        } else {
          console.log("Ch∆∞a ƒëƒÉng nh·∫≠p");
        }
      })
      .catch((error) => console.error("L·ªói check session:", error));
  });
</script>
